<%= link_to 'Home', controller: 'home_page' %>

<h1>Profile for <%=@person.firstname%> <%=@person.lastname%></h1>
<br>
<h2>Personal Information</h2>
<p>
    <strong>Email: </strong><%=@person.user.email%><br>
    <strong>Date of birth: </strong><%=@person.dob.to_formatted_s(:long_ordinal)%><br>
    <strong>Phone Number: </strong><%=@person.phone%><br>
</p>

<p>
  <strong>Person ApartmentNumber:</strong>
  <%= @person.address.apartmentNumber %>
  <br>

  <strong>Person StreetNumber:</strong>
  <%= @person.address.streetNumber %>
  <br>

  <strong>Person StreetName:</strong>
  <%= @person.address.streetName %>
  <br>

  <strong>Person City:</strong>
  <%= @person.address.city %>
  <br>

  <strong>Person Province:</strong>
  <%= @person.address.province %>
  <br>

  <strong>Person Country:</strong>
  <%= @person.address.country %>
  <br>

  <strong>Person PostalCode:</strong>
  <%= @person.address.postalCode %>
</p>

<p>
  <b> Tournaments (player) </b>
  <%=
    if user_is_admin?
      players = @person.players.all

      unless players.blank?
        tournaments = []

        players.each do |p|
          tournaments << p.tournament
        end

        render partial: "tournaments/tournament_table", locals: {tournaments: tournaments, include_cond: "true == true"}
      end
    end
  %>

  <br>
  <b> Tournaments (sponsor) </b>
  <%=
    if user_is_admin?
      sponsors = @person.sponsors.all

      unless sponsors.blank?
        tournaments = []

        sponsors.each do |p|
          tournaments << p.tournament
        end

        render partial: "tournaments/tournament_table", locals: {tournaments: tournaments, include_cond: "true == true"}
      end
    end
  %>

  <br>
  <b> Tournaments (organizer) </b>
  <%=
    if user_is_admin?
      organizers = @person.tournament_organizers.all

      unless organizers.blank?
        tournaments = []

        organizers.each do |p|
          tournaments << p.tournament
        end

        render partial: "tournaments/tournament_table", locals: {tournaments: tournaments, include_cond: "true == true"}
      end
    end
  %>

  <br>
  <b> Golf Courses (admin) </b>
  <%=
    if user_is_admin?
      organizers = @person.golf_course_organizers.all

      unless organizers.blank?
        golf_courses = []

        organizers.each do |p|
          golf_courses << p.golf_course

          render partial: "golf_courses/golf_course_table", locals: {golf_course: golf_courses}
        end

      end
    end
  %>
</p>

